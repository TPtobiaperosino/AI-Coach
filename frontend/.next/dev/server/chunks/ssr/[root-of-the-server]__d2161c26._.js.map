{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/tobiaperosino/Library/CloudStorage/OneDrive-OxfordBrookesUniversity/Microsoft%20Copilot%20Chat%20Files/Tech%20Projects/running-AI-Coach/frontend/app/page.tsx"],"sourcesContent":["// this will be the front door of the app\n// I need to send the user to Cognito, I'm delegating the authentication to Cognito\n// The login button just sends the browser to Cognito --> it is a redirect\n// If cognito authorises the user and login works, Cognito gives to the browser a code and dends the browser back to the app\n// Code is just used at every login OAuth when a new JWT is needed and lasts a few minutes\n\n// Browser goes back to the app with a URL like \"http://localhost:3000/callback?code=ABC123\" which is the address of the callback page\n// The callback page is made of HTML and JS run by the browser when it goes through the corresponding URL\n// A URL is associated to a page through Next.js --> I create the callback page associated to the URL with the code so browser when it reads it loads the callback page\n// The browser, loads the page and execues the JS inside it. JS finds the code and extracts it.\n// Callback will be used to get the JWT, with a library Auth callback will be read, and then code exchanged with the JWT with Cognito\n\n// The JS, after reading the code calls an Amplify Auth function or a manual fetch --> makes http request to Cognito --> exchanges the code with the JWT\n\n// Just for reference --> fetch is a way to ask data to a server without changing page\n\n// Therefore I need to build a login button that does a redirect for the browser towards Cognito. --> window.location.href = \"https://your-cognito-domain/login?...\";\n// I'll use TypeScript + JSX using react withing the Next.js framework\n\n\"use client\"; // Debug ERROR 1 --> the code below runs in the browser so I need to use Client Component\n\nexport default function HomePage() {\n  // defining the page; export default makes this component importable as default\n\n  function generateState(): string {\n    const array = new Uint8Array(16); \n    // creating an array of 16 cells, each cell = 1 byte (binary-safe array)\n\n    crypto.getRandomValues(array); \n    // browser crypto API, secure and non-predictable (Math.random is predictable)\n\n    return Array.from(array)\n      .map((b) => b.toString(16).padStart(2, \"0\"))\n      .join(\"\");\n  }\n\n  // map() converts values\n  // toString(16) converts to hex (e.g. 10 = \"a\")\n  // padStart ensures 2 digits per byte\n\n  function handleLogin() {\n    // in React, pages are components (functions)\n    const state = generateState();\n\n    sessionStorage.setItem(\"oauth_state\", state); \n    // saving state in browser storage (key-value)\n\n    const cognitoDomain =\n      \"https://ai-coach-user-pool-login.auth.eu-west-2.amazoncognito.com\";\n    const clientId = \"2g9rugh4u5nhuaer56ft2okm0\";\n    const redirectUri = encodeURIComponent(\n      \"http://localhost:3000/callback\"\n    ); // must match exactly the callback URL in Cognito\n    const scope = encodeURIComponent(\"openid email profile\");\n\n    const url =\n      `${cognitoDomain}/oauth2/authorize` +\n      `?response_type=code` +\n      `&client_id=${clientId}` +\n      `&redirect_uri=${redirectUri}` +\n      `&scope=${scope}` +\n      `&state=${state}`;\n\n    window.location.href = url;\n    // browser redirect to Cognito Hosted UI\n  }\n\n  return (\n    <div>\n      <button onClick={handleLogin}>Login</button>\n    </div>\n  );\n}\n\n//ERROR 1: on Click does not work and gives error because:\n// Code runs on:\n//1) Server --> remote computer which generates HTML, does not see clicks, browser, does not have browser console\n//2) Browser: Chrome e.g., sees clicks, buttons, eruns JS, can do redirect --> clicks can be seen only in the browser\n// In Next.js pages run on server, not in the browser (this makes everything faster and better SEO)\n// 2 types of component --> (i) Server which is default and (ii) Client which runs in the browser\n// !!!! I need to tell to Next.js that I want this component running on the browser (make it client) --> to do so I need to write at the beginning \"use client\"\n"],"names":[],"mappings":";;;;;AAAA,yCAAyC;AACzC,mFAAmF;AACnF,0EAA0E;AAC1E,4HAA4H;AAC5H,0FAA0F;AAE1F,sIAAsI;AACtI,yGAAyG;AACzG,uKAAuK;AACvK,+FAA+F;AAC/F,qIAAqI;AAErI,wJAAwJ;AAExJ,sFAAsF;AAEtF,qKAAqK;AACrK,sEAAsE;AAEtE,cAAc,yFAAyF;;AAExF,SAAS;IACtB,+EAA+E;IAE/E,SAAS;QACP,MAAM,QAAQ,IAAI,WAAW;QAC7B,wEAAwE;QAExE,OAAO,eAAe,CAAC;QACvB,8EAA8E;QAE9E,OAAO,MAAM,IAAI,CAAC,OACf,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MACtC,IAAI,CAAC;IACV;IAEA,wBAAwB;IACxB,+CAA+C;IAC/C,qCAAqC;IAErC,SAAS;QACP,6CAA6C;QAC7C,MAAM,QAAQ;QAEd,eAAe,OAAO,CAAC,eAAe;QACtC,8CAA8C;QAE9C,MAAM,gBACJ;QACF,MAAM,WAAW;QACjB,MAAM,cAAc,mBAClB,mCACC,iDAAiD;QACpD,MAAM,QAAQ,mBAAmB;QAEjC,MAAM,MACJ,GAAG,cAAc,iBAAiB,CAAC,GACnC,CAAC,mBAAmB,CAAC,GACrB,CAAC,WAAW,EAAE,UAAU,GACxB,CAAC,cAAc,EAAE,aAAa,GAC9B,CAAC,OAAO,EAAE,OAAO,GACjB,CAAC,OAAO,EAAE,OAAO;QAEnB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACvB,wCAAwC;IAC1C;IAEA,qBACE,8OAAC;kBACC,cAAA,8OAAC;YAAO,SAAS;sBAAa;;;;;;;;;;;AAGpC,EAEA,0DAA0D;CAC1D,gBAAgB;CAChB,iHAAiH;CACjH,qHAAqH;CACrH,mGAAmG;CACnG,iGAAiG;CACjG,+JAA+J"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/tobiaperosino/Library/CloudStorage/OneDrive-OxfordBrookesUniversity/Microsoft%20Copilot%20Chat%20Files/Tech%20Projects/running-AI-Coach/frontend/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/tobiaperosino/Library/CloudStorage/OneDrive-OxfordBrookesUniversity/Microsoft%20Copilot%20Chat%20Files/Tech%20Projects/running-AI-Coach/frontend/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}